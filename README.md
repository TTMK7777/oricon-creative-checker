# オリコン クリエイティブチェッカー

ファイルをアップロードするだけで、オリコン顧客満足度®調査の表現規定準拠を自動チェックするWebアプリケーションです。

## 主な機能

- **ファイル形式を問わず対応**: PNG, JPG, PDF など主要なファイル形式に対応
- **PDF自動画像化**: PDFファイルは内部で自動的に画像変換して判定
- **AI判定（GPT-4o Vision）**: OpenAI の最新AIで画像を分析
- **要確認事項の明示**: 問題点を「重大」「警告」「情報」レベルで色分け表示
- **複数ファイル一括処理**: 複数ファイルをまとめてチェック可能
- **結果のエクスポート**: JSON形式で結果をダウンロード

## 対応ファイル形式

| 形式 | 拡張子 |
|------|--------|
| 画像 | PNG, JPG, JPEG, GIF, WEBP, BMP |
| ドキュメント | PDF（全ページを画像化して判定） |

## セットアップ手順

### 1. 必要なもの

- Python 3.8以上
- OpenAI APIキー（GPT-4o Vision対応）

### 2. インストール

```bash
# プロジェクトフォルダに移動
cd oricon-creative-checker

# 依存関係をインストール
pip install -r requirements.txt
```

### 3. APIキーの設定

`.env` ファイルにOpenAI APIキーを設定してください：

```
OPENAI_API_KEY=sk-proj-xxxxxxxxxx
```

または、アプリ起動後にサイドバーで直接入力することもできます。

### 4. アプリ起動

```bash
streamlit run app.py
```

ブラウザで `http://localhost:8501` が自動的に開きます。

## 使い方

1. **ファイルをアップロード**: 「ファイルアップロード」エリアにPDF/画像をドラッグ&ドロップ
2. **チェック実行**: 「チェック実行」ボタンをクリック
3. **結果を確認**: 判定結果が色分けで表示されます
   - ✅ 問題なし（緑）
   - ❌ 問題あり（赤）
   - ⚠️ 要確認（黄）
4. **エクスポート**: 必要に応じて「結果をJSONでダウンロード」

## チェック項目

### 禁止表現（即座に警告）
- 「オリコンランキング」
- 「オリコン1位」「オリコン第1位」
- 「オリコンNo.1」「オリコンNo1」

### 必須要素（4要素すべて必要）
1. **対象年**: 20XX年 形式
2. **発行元**: オリコン顧客満足度®調査（®マーク必須）
3. **ランキング名**: 業種・業態名
4. **順位**: 第X位

### フォーマット
- 各要素間に半角スペースが必要
- ®マークの存在確認

## コスト目安

| 処理対象 | 概算コスト |
|----------|-----------|
| 画像1枚 | 約$0.01〜0.03 |
| PDF（5ページ） | 約$0.05〜0.15 |

## 注意事項

- **AI判定は補助的なものです**
- 最終確認は必ず担当者が行ってください
- ®マークの検出精度は画像品質に依存します

## プロジェクト構成

```
oricon-creative-checker/
├── app.py                 # メインアプリケーション
├── core/
│   ├── __init__.py
│   ├── file_processor.py  # ファイル処理（PDF→画像変換）
│   └── openai_checker.py  # OpenAI API連携
├── config/
│   └── prompt.txt         # GPT-4oへのプロンプト
├── requirements.txt       # 依存関係
├── .env                   # APIキー設定
├── .env.example           # APIキー設定サンプル
└── README.md              # このファイル
```

## トラブルシューティング

### Q: APIエラーが発生する
A: `.env` ファイルのAPIキーが正しいか確認してください。

### Q: PDFが処理できない
A: PyMuPDFがインストールされているか確認してください: `pip install PyMuPDF`

### Q: 文字が認識されない
A: 画像の解像度が低い可能性があります。高解像度のファイルをお試しください。

## バージョン

- v1.0.0（2025-11-26）: 初版リリース

---

開発: Tさん
技術スタック: Python, Streamlit, OpenAI GPT-4o Vision, PyMuPDF
